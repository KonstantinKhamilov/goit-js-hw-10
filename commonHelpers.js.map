{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n\n// Ваш код, использующий flatpickr\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst day = document.getElementById('day');\nconst hrs = document.getElementById('hrs');\nconst min = document.getElementById('min');\nconst sec = document.getElementById('sec');\n\nconst userDay = document.querySelector('[data-days]');\nconst userHrs = document.querySelector('[data-hours]');\nconst userMin = document.querySelector('[data-minutes]');\nconst userSec = document.querySelector('[data-seconds]');\n\nconst currentYear = new Date().getFullYear();\n\nlet newYear = new Date(`1 Jan ${currentYear + 1} 00:00:00`);\nlet userSelectedDate;\nlet intervalId;\n\nfunction countdownDate(targetDate, dayElem, hrsElem, minElem, secElem) {\n  return function () {\n    const today = Date.now();\n    const gap = targetDate - today;\n    if (gap <= 0) {\n      clearInterval(intervalId);\n      dayElem.innerHTML = '00';\n      hrsElem.innerHTML = '00';\n      minElem.innerHTML = '00';\n      secElem.innerHTML = '00';\n      return;\n    }\n    let d = Math.floor(gap / 1000 / 60 / 60 / 24);\n    let h = Math.floor((gap / 1000 / 60 / 60) % 24);\n    let m = Math.floor((gap / 1000 / 60) % 60);\n    let s = Math.floor((gap / 1000) % 60);\n\n    dayElem.innerHTML = d < 10 ? '0' + d : d;\n    hrsElem.innerHTML = h < 10 ? '0' + h : h;\n    minElem.innerHTML = m < 10 ? '0' + m : m;\n    secElem.innerHTML = s < 10 ? '0' + s : s;\n  };\n}\n\nintervalId = setInterval(countdownDate(newYear, day, hrs, min, sec), 1000);\n\n// Объект параметров для flatpickr\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    // Проверка, является ли выбранная дата датой в будущем\n    if (selectedDates[0] > new Date()) {\n      // Если да, сохраняем выбранную дату и делаем кнопку \"Start\" активной\n      userSelectedDate = selectedDates[0];\n      document.getElementById('startButton').disabled = false;\n    } else {\n      // Если нет, показываем предупреждение и делаем кнопку \"Start\" неактивной\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n      });\n      document.getElementById('startButton').disabled = true;\n    }\n  },\n};\n\n// Инициализация flatpickr с выбранными параметрами\nflatpickr('#datetime-picker', options);\n\n/// Обработчик нажатия на кнопку \"Start\"\ndocument.getElementById('startButton').addEventListener('click', function () {\n  // Обновляем дату для обратного отсчета\n  newYear = userSelectedDate;\n  this.disabled = true;\n\n  // Запуск обратного отсчета времени до выбранной даты\n  intervalId = setInterval(\n    countdownDate(userSelectedDate, userDay, userHrs, userMin, userSec),\n    1000\n  );\n  // Делаем поле ввода и кнопку неактивными во время работы таймера\n  document.getElementById('datetime-picker').disabled = true;\n  this.disabled = true;\n});\n"],"names":["day","hrs","min","sec","userDay","userHrs","userMin","userSec","currentYear","newYear","userSelectedDate","intervalId","countdownDate","targetDate","dayElem","hrsElem","minElem","secElem","today","gap","d","h","m","s","options","selectedDates","iziToast","flatpickr"],"mappings":"2GAYA,MAAMA,EAAM,SAAS,eAAe,KAAK,EACnCC,EAAM,SAAS,eAAe,KAAK,EACnCC,EAAM,SAAS,eAAe,KAAK,EACnCC,EAAM,SAAS,eAAe,KAAK,EAEnCC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEjDC,EAAc,IAAI,OAAO,cAE/B,IAAIC,EAAU,IAAI,KAAK,SAASD,EAAc,CAAC,WAAW,EACtDE,EACAC,EAEJ,SAASC,EAAcC,EAAYC,EAASC,EAASC,EAASC,EAAS,CACrE,OAAO,UAAY,CACjB,MAAMC,EAAQ,KAAK,MACbC,EAAMN,EAAaK,EACzB,GAAIC,GAAO,EAAG,CACZ,cAAcR,CAAU,EACxBG,EAAQ,UAAY,KACpBC,EAAQ,UAAY,KACpBC,EAAQ,UAAY,KACpBC,EAAQ,UAAY,KACpB,MACD,CACD,IAAIG,EAAI,KAAK,MAAMD,EAAM,IAAO,GAAK,GAAK,EAAE,EACxCE,EAAI,KAAK,MAAOF,EAAM,IAAO,GAAK,GAAM,EAAE,EAC1CG,EAAI,KAAK,MAAOH,EAAM,IAAO,GAAM,EAAE,EACrCI,EAAI,KAAK,MAAOJ,EAAM,IAAQ,EAAE,EAEpCL,EAAQ,UAAYM,EAAI,GAAK,IAAMA,EAAIA,EACvCL,EAAQ,UAAYM,EAAI,GAAK,IAAMA,EAAIA,EACvCL,EAAQ,UAAYM,EAAI,GAAK,IAAMA,EAAIA,EACvCL,EAAQ,UAAYM,EAAI,GAAK,IAAMA,EAAIA,CAC3C,CACA,CAEAZ,EAAa,YAAYC,EAAcH,EAAST,EAAKC,EAAKC,EAAKC,CAAG,EAAG,GAAI,EAGzE,MAAMqB,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAEjBA,EAAc,CAAC,EAAI,IAAI,MAEzBf,EAAmBe,EAAc,CAAC,EAClC,SAAS,eAAe,aAAa,EAAE,SAAW,KAGlDC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACjB,CAAO,EACD,SAAS,eAAe,aAAa,EAAE,SAAW,GAErD,CACH,EAGAC,EAAU,mBAAoBH,CAAO,EAGrC,SAAS,eAAe,aAAa,EAAE,iBAAiB,QAAS,UAAY,CAE3Ef,EAAUC,EACV,KAAK,SAAW,GAGhBC,EAAa,YACXC,EAAcF,EAAkBN,EAASC,EAASC,EAASC,CAAO,EAClE,GACJ,EAEE,SAAS,eAAe,iBAAiB,EAAE,SAAW,GACtD,KAAK,SAAW,EAClB,CAAC"}